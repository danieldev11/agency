 <script>
  const N8N_ENDPOINT = 'http://localhost:5678/webhook-test/testing';

  const form = document.getElementById('contact');
  const submitBtn = form?.querySelector('button[type="submit"]');

  form?.addEventListener('submit', async (e) => {
    e.preventDefault();

    // Honeypot: bots will often fill hidden fields
    const honeypot = form.querySelector('input[name="website"]')?.value || '';
    if (honeypot) {
      // Silently drop
      return;
    }

    const data = Object.fromEntries(new FormData(form).entries());

    // Basic front-end validation (keep it lightweight)
    if (!data.name || !data.email) {
      alert('Please fill your name and email.');
      return;
    }

    submitBtn.disabled = true;
    submitBtn.textContent = 'Sending…';

    try {
      const res = await fetch(N8N_ENDPOINT, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          name: data.name,
          email: data.email,
          message: data.message ?? '',
          // Add simple metadata now; we’ll enrich later
          submittedAt: new Date().toISOString()
        })
      });

      if (!res.ok) throw new Error('Request failed');

      alert('Thanks! We received your message.');
      form.reset();
    } catch (err) {
      console.error(err);
      alert('Something went wrong. Please try again.');
    } finally {
      submitBtn.disabled = false;
      submitBtn.textContent = 'Send';
    }
  });
</script>

<form id="contact" autocomplete="off">
  <!-- Visible fields -->
  <label>
    Name
    <input name="name" required />
  </label>

  <label>
    Email
    <input type="email" name="email" required />
  </label>

  <label>
    Message
    <textarea name="message" rows="4"></textarea>
  </label>

  <!-- Honeypot (keep it invisible but present) -->
  <input
    type="text"
    name="website"
    tabindex="-1"
    autocomplete="off"
    style="position:absolute;left:-10000px;top:auto;width:1px;height:1px;overflow:hidden;"
    aria-hidden="true"
  />

  <button type="submit">Send</button>
</form>
